extends layout

include mixins/mmc.pug
include mixins/badge.pug
include mixins/svg.pug

block head
  meta(property="og:type", content="resonite.world")
  meta(property="og:image", content=ogThumbnailUrl)
  meta(property="og:description", content=ogDescription)
  meta(name="twitter:card", content="summary_large_image")
  link(type="application/json+oembed", href=jsonUrl)

block content
  h1 !{ name }

  ul.badge-list
    if isFeatured
      +badge("Featured World", "yellow", "https://wiki.resonite.com/Category:Featured_Worlds")
        +svg("/images/reso_featured_ribbon.svg#featured_ribbon")(aria-hidden)
    if mmc
      +badge("MMC World", "mmc", "https://wiki.resonite.com/MMC")
        img(src="/images/MMC.png", alt="")

  .center
    img(
      src=thumbnailUri,
      alt=`A preview image of the '${title}' world.`,
      onerror=`this.onerror=null; this.src='${noThumbnailUrl}';`
    )

  dl.infobox
    .row
      dt By:#{ ' ' }
      dd #{ ownerName }
    .row
      dt Description:#{ ' ' }
      dd !{ description }
    .row
      dt Created on:#{ ' ' }
      dd #{ creationTime }
    if isPublished
      .row
        dt First published on:#{ ' ' }
        dd #{ firstPublishTime }
    else
      .row
        dt Published:#{ ' ' }
        dd.warning Not Published
    .row
      dt Last modified on:#{ ' ' }
      dd #{ lastModificationTime }
    .row
      dt Visits:#{ ' ' }
      dd #{ visits }
    .row
      dt Tags:#{ ' ' }
      dd #{ tags.join(", ") }
  .center
    a.btn(href=`resrec:///${ownerId}/${id}`) Open World!
  p.center
    a(href="https://wiki.resonite.com/go.resonite.com") Need Help?
  h2.subheading Alternative URLs
  ul
    li #[strong Record Url:] 
      span.select-all #{ `resrec:///${ownerId}/${id}` }
  if mmc
    +mmcMixin(mmc)
